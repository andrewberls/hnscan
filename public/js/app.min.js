/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};$.cookie=function(e,t,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(t))||t===null||t===undefined)){n=$.extend({},n);if(t===null||t===undefined)n.expires=-1;if(typeof n.expires=="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var s=n.raw?function(e){return e}:decodeURIComponent,o=document.cookie.split("; ");for(var u=0,a;a=o[u]&&o[u].split("=");u++)if(s(a[0])===e)return s(a[1]||"");return null};var create_node,destroy_item,generate_links;create_node=function(e){return e==null&&(e={}),'<div class="item">\n  <input type="checkbox">\n  <span class="post" data-id="'+e.id+'" data-url="'+e.url+'">'+e.title+"</span>\n</div>"},generate_links=function(e){var t,n,r,i,s,o;e==null&&(e={}),s=e.items,o=[];for(r=0,i=s.length;r<i;r++)t=s[r],$.cookie("item-"+t.id)!=="true"?(n=create_node({id:t.id,url:t.url,title:t.title}),o.push($("#links").append(n))):o.push(void 0);return o},destroy_item=function(e,t){return e.slideUp(250,function(){return $.cookie("item-"+t,!0),e.remove()})},$(function(){return $("#auth-username").val($.cookie("auth-username")),$("#auth-password").val($.cookie("auth-password")),$.ajax({url:"http://api.ihackernews.com/page?format=jsonp&callback=?",dataType:"jsonp",success:generate_links}),$(document.body).delegate("input[type=checkbox]","click",function(){var e,t,n,r,i,s,o;return o=$.cookie("auth-username")||$("#auth-username").val(),r=$.cookie("auth-password")||$("#auth-password").val(),o===""||r===""?(alert("Please enter your Instapaper credentials in the form"),$(this).attr("checked",!1)):($.cookie("auth-username",o),$.cookie("auth-password",r),t=$(this).parent(),n=t.find("span"),e=n.data("id"),s=n.data("url"),i=n.text(),$.ajax({url:"https://www.instapaper.com/api/add?format=jsonp&username="+o+"&password="+r+"&url="+s+"&title="+i,dataType:"jsonp"}),destroy_item(t,e))})});